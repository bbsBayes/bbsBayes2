# Convergence metrics

Calculate convergence metrics for the model run. Specifically calculates
bulk and tail effective sample sizes (ess_bulk, ess_tail) and R-hat
(`rhat`). Returns output very similar to
[`get_summary()`](https://bbsbayes.github.io/bbsBayes2/reference/get_summary.md).

## Usage

``` r
get_convergence(model_output, variables = NULL)
```

## Arguments

- model_output:

  List. Model output generated by
  [`run_model()`](https://bbsbayes.github.io/bbsBayes2/reference/run_model.md).

- variables:

  Character vector. Specific variables (e.g., `"strata_raw[1]"`) or
  variable types (e.g., `"strata_raw"`) for which to calculate metrics.
  If `NULL` (default) all variables are returned.

## Value

Data frame of convergence metrics for all model variables. Contains
`variable_type`, `variable`, `ess_bulk`, `ess_tail`, and `rhat`.

## See also

Other model assessment functions:
[`get_model_vars()`](https://bbsbayes.github.io/bbsBayes2/reference/get_model_vars.md),
[`get_summary()`](https://bbsbayes.github.io/bbsBayes2/reference/get_summary.md)

## Examples

``` r
# Temporarily suppress convergence warning for legibility
# "The ESS has been capped to avoid unstable estimates."
opts <- options(warn = -1)

# Using the example model for Pacific Wrens

get_convergence(pacific_wren_model)
#> Error in assert_valid_draws_format(format): could not find function "assert_valid_draws_format"
get_convergence(pacific_wren_model, variables = "strata_raw")
#> Error in assert_valid_draws_format(format): could not find function "assert_valid_draws_format"
get_convergence(pacific_wren_model, variables = "strata_raw[9]")
#> Error in assert_valid_draws_format(format): could not find function "assert_valid_draws_format"

# Restore warnings
options(opts)
```
