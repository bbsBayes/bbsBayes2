<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Filter for data quality — prepare_data • bbsBayes2</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Filter for data quality — prepare_data"><meta name="description" content="Check and filter the stratified data by minimum required samples for
modelling, and prepare data format for use by models."><meta property="og:description" content="Check and filter the stratified data by minimum required samples for
modelling, and prepare data format for use by models."><meta property="og:image" content="https://bbsbayes.github.io/bbsBayes2/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bbsBayes2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/bbsBayes2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bbsBayes/bbsBayes2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Filter for data quality</h1>
      <small class="dont-index">Source: <a href="https://github.com/bbsBayes/bbsBayes2/blob/main/R/prepare-data.R" class="external-link"><code>R/prepare-data.R</code></a></small>
      <div class="d-none name"><code>prepare_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Check and filter the stratified data by minimum required samples for
modelling, and prepare data format for use by models.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_data</span><span class="op">(</span></span>
<span>  <span class="va">strata_data</span>,</span>
<span>  min_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_n_routes <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  min_max_route_years <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  min_mean_route_years <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-strata-data">strata_data<a class="anchor" aria-label="anchor" href="#arg-strata-data"></a></dt>
<dd><p>List. Stratified data generated by <code><a href="stratify.html">stratify()</a></code></p></dd>


<dt id="arg-min-year">min_year<a class="anchor" aria-label="anchor" href="#arg-min-year"></a></dt>
<dd><p>Numeric. Minimum year to use. Default (<code>NULL</code>) uses first
year in data.</p></dd>


<dt id="arg-max-year">max_year<a class="anchor" aria-label="anchor" href="#arg-max-year"></a></dt>
<dd><p>Numeric. Maximum year to use. Default (<code>NULL</code>) uses first
year in data.</p></dd>


<dt id="arg-min-n-routes">min_n_routes<a class="anchor" aria-label="anchor" href="#arg-min-n-routes"></a></dt>
<dd><p>Numeric. Required minimum routes per strata where species
has been observed. Default 3.</p></dd>


<dt id="arg-min-max-route-years">min_max_route_years<a class="anchor" aria-label="anchor" href="#arg-min-max-route-years"></a></dt>
<dd><p>Numeric. Required minimum number of years with
non-zero observations of species on at least 1 route. Default 3. Only
retain strata with at least one route where the species was observed at
least once in this many years.</p></dd>


<dt id="arg-min-mean-route-years">min_mean_route_years<a class="anchor" aria-label="anchor" href="#arg-min-mean-route-years"></a></dt>
<dd><p>Numeric. Required minimum average of years per
route with the species observed. Default 1. Only retain strata where the
average number of years the species was observed per route is greater than
this value.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical. Suppress progress messages? Default <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List of prepared (meta) data to be used for modelling and further
steps.</p><ul><li><p><code>model_data</code> - list of data formatted for use in Stan modelling</p></li>
<li><p><code>meta_data</code> - meta data defining the analysis</p></li>
<li><p><code>meta_strata</code> - data frame listing strata meta data</p></li>
<li><p><code>raw_data</code> - data frame of summarized counts used to create <code>model_data</code>
(just formatted more nicely)</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Data prep functions:
<code><a href="prepare_model.html">prepare_model</a>()</code>,
<code><a href="prepare_spatial.html">prepare_spatial</a>()</code>,
<code><a href="stratify.html">stratify</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Toy example with Pacific Wren sample data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># First, stratify the sample data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="stratify.html">stratify</a></span><span class="op">(</span>by <span class="op">=</span> <span class="st">"bbs_cws"</span>, sample_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using 'bbs_cws' (standard) stratification</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using sample BBS data...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using species Pacific Wren (sample data)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Filtering to species Pacific Wren (7221)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Stratifying data...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   Combining BCR 7 and NS and PEI...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   Renaming routes...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prepare the stratified data for use in a model. In this</span></span></span>
<span class="r-in"><span><span class="co">#   toy example, we will set the minimum year as 2009 and</span></span></span>
<span class="r-in"><span><span class="co">#   maximum year as 2018, effectively only setting up to</span></span></span>
<span class="r-in"><span><span class="co">#   model 10 years of data.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">prepare_data</span><span class="op">(</span><span class="va">s</span>, min_year <span class="op">=</span> <span class="fl">2009</span>, max_year <span class="op">=</span> <span class="fl">2018</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brandon P.M. Edwards, Adam C. Smith, Steffi LaZerte.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

